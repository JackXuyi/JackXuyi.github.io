---
title: http协议
date: 2021-03-21 16:41:21
tags: 计算机网络
---

### HTTP 1.1

发布于 1999 年，默认使用文本格式传输数据

#### 长链接

默认包含 `Connection: keep-alive` 头，可以让客户端和服务端在一段时间内可以复用这个链接，无需再次建立链接。链接复用发生在应用层，且复用是串行的

#### 协议扩展切换

支持在请求头部域消息中包含 `Upgrade` 头并让客户端通过头部标识令服务器知道它能够支持其它备用通信协议的一种机制，服务器根据客户端请求的其它协议进行切换，切换后使用备用协议与客户端进行通信

#### 缓存控制

新增 `Cache-Control` 字段，支持 `max-age` 用来表示相对过期时间；服务器也可以通过 `Etag` 和 `Last-Modified` 来判断是否从浏览器中加载文件，此时缓存的控制和判断将决定响应状态码是 200 还是 304。参考[浏览器缓存](/2020/08/31/浏览器缓存/)章节

#### 部分内容传输优化

引入了 `range` 头域支持超文本文件的部分传输。如允许请求一个文件的起始位置和偏移长度来进行文件内容的部分传输

#### Host 头处理

请求消息和响应消息都支持 `Host` 头域，且请求消息中如果没有 `Host` 头域会报告一个错误（`400 Bad Request`）

#### 错误通知的管理

新增了 `24` 个错误状态响应码，如 `409（Conflict）`表示请求的资源与资源的当前状态发生冲突；`410（Gone）`表示服务器上的某个资源被永久性的删除。

### HTTP 2.0

- 采用完全的二进制格式来传输数据，其在网络中以帧的形式传播，多个帧在网络中形成了帧的传输网络流，即流式传播的。
- 使用 `TCP` 复用的方式来降低网络请求链接的建立和关闭的开销，多个请求可以通过一个链接来进行并发完成。复用发生在传输层，是帧的多路复用，不同文件的传输可以在一个 `TCP` 连接中一起同时进行流式传播
- 支持传输流的优先级和流量控制机制
- 支持服务端推送

#### `SPDY` 协议

使用 `SSL` 传输协议，支持多路复用和服务端推送技术，压缩 `HTTP` 头部以减少传输大小

### 参考

- [HTTP1.0、HTTP1.1 和 HTTP2.0 的区别](https://www.jianshu.com/p/be29d679cbff)
